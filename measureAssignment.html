<html>
<head>
	<title>User Access Control Maintenance</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<style type="text/css">
	body
	{
		background-size: 1200px 670px;
		background-color: #F7981D;
		font-family: sans-serif;
	}
	#main_canvas
	{
		height:300px;
		width:700px;
		/*background-color:#777777;*/
		margin-left: auto;
		margin-right: auto;
		color: #000000;
	}
	#header_canvas
	{
		height:100px;
		width:700px;
		/*background-color:#777777;*/
		margin-left: auto;
		margin-right: auto;
		color: #000000;
	}
	.row
	{
		height: 40px;
		width: 700px;
	}
	.lbl1
	{
		height: 40px;
		width: 350px;
		padding: 0 0 0 271px;
		float: left;
	}
	.lbl2
	{
		height: 40px;
		width: 350px;
		padding: 0 0 0 265px;
		float: left;
	}
	.lbl3
	{
		height: 40px;
		width: 350px;
		padding: 0 0 0 270px;
		float: left;
	}
	.lbl4
	{
		height: 40px;
		width: 350px;
		padding: 0 0 0 170px;
		float: left;
	}
	.lbl5
	{
		height: 40px;
		width: 350px;
		padding: 0 0 0 195px;
		float: left;
	}
	.lbl6
	{
		height: 40px;
		width: 350px;
		padding: 0 0 0 260px;
		float: left;
	}
	.lbl7
	{
		height: 40px;
		width: 360px;
		padding: 0 0 0 227px;
		float: left;
	}	
	.lbl8
	{
		height: 40px;
		width: 350px;
		padding: 0 0 0 0px;
		float: left;
	}
	.lbl9
	{
		height: 40px;
		width: 350px;
		padding: 0 0 0 280px;
		float: left;
	}
	.txtbox_container, .lbl_container
	{
		height: 40px;
		width: 350px;
		float: left;
	}
	</style>
	<script type="text/javascript">
	var  allocatedArr = [],availableArr=[];

	function addUser()
	{
		var x = document.getElementById("mySelect1");
	    var y = document.getElementById("mySelect2");
	    var option = document.createElement("option");
	    if(x.value)
		{
			option.text = x.value;
			option.value = x.value;
			option.id = $('#mySelect1').find('option:selected').attr('id');
			y.add(option);
	    	x.remove(x.selectedIndex);
	    }
	    
	}
	function removeUser() 
	{
	    
	    var x = document.getElementById("mySelect2");
	    var y = document.getElementById("mySelect1");
	    var option = document.createElement("option");
	    if(x.value)
		{    
	    	option.text = x.value;
	    	option.value = x.value;
	    	option.id = $('#mySelect2').find('option:selected').attr('id');

	   		y.add(option);
	   		x.remove(x.selectedIndex);
	   	}
	}
	function show_elements()
	{
		
		var myList1 = [],myList2 = [];
		var country_name = document.getElementById("measure").value;
		$('#mySelect1 option').each(function() {
		    myList1.push($(this).attr('id'))
		});

		$('#mySelect2 option').each(function() {
		    myList2.push($(this).attr('id'))
		});

		for(var k=0;k<2;k++)
		{
			for(var i=0;i<myList1.length;i++)
			{
				for(var j=0;j<availableArr.length;j++)
				{
					if(availableArr[j]==myList1[i])
					{
						myList1.splice(myList1.indexOf(myList1[i]),1);
					}
				}	
			}
		}
		for(var k=0;k<2;k++)
		{
			for(var i=0;i<myList2.length;i++)
			{
				for(var j=0;j<allocatedArr.length;j++)
				{
					if(allocatedArr[j]==myList2[i])
					{
						myList2.splice(myList2.indexOf(myList2[i]),1);
					}
				}	
			}
		}		

		//alert("Remove : "+ myList1 +"\nAdd : " + myList2 + "\nfor country : " + country_name);

		$(document).ready(function(){
	    	
	        $.getJSON("/UAC/rest/uac/addCountryToUsers/"+myList2+"/"+myList1+"/"+country_name, function(countryByZone){
	            	$.each(countryByZone, function(i, field){
	            	$('#measure').append(
        			$('<option></option>').val(i).html(field));
	            });
	        });
	    
		});
	}
	function countryByZone(zoneName)
	{
		$('#category').val("-- Please select --");
		$('#measure').html("");
		$('#measure').append(	            		
	    $('<option></option>').val("-- Please select --").html("-- Please select --")); 
		$(document).ready(function(){
	    	
	        $.getJSON("/UAC/rest/uac/getCountriesByZone/"+zoneName, function(countryByZone){
	            	$.each(countryByZone, function(i, field){
	            	$('#measure').append(
        			$('<option></option>').val(i).html(field));
	            });
	        });
	    
		});
	}

	function countryByBUCode(BUCode)
	{
		$('#country').val("-- Please select --");
		$('#measure').html("");
		$('#measure').append(	            		
	    $('<option></option>').val("-- Please select --").html("-- Please select --")); 
		$(document).ready(function(){
	    	
	        $.getJSON("/UAC/rest/uac/getCountriesBybuCode/"+BUCode, function(countryByZone){
	            	$.each(countryByZone, function(i, field){
	            	$('#measure').append(
        			$('<option></option>').val(i).html(field));
	            });
	        });
	    
		});

	}

	function allocatedUser(countryCode)
	{
		allocatedArr = [];
		$('#mySelect2').html("");
		$(document).ready(function(){
	    	
	        $.getJSON("/UAC/rest/uac/getAllocatedUser/"+countryCode, function(countryByZone){
	            	$.each(countryByZone, function(i, field){
	            	$('#mySelect2').append(
        			$('<option></option>').val(field).attr('id',i).html(field));
        			allocatedArr.push(i);
	            });
	        });
	    
		});
	}

	function availableUser(countryCode)
	{
		availableArr = [];
		$('#mySelect1').html("");
		$(document).ready(function(){
	    	
	        $.getJSON("/UAC/rest/uac/getAvailableUser/"+countryCode, function(countryByZone){
	            	$.each(countryByZone, function(i, field){
	            	$('#mySelect1').append(
        			$('<option></option>').val(field).attr('id',i).html(field));
        			availableArr.push(i);
	            });
	        });
	    
		});
	}	

	/*$(document).ready(function(){
    //Getting all the zones 
        $.getJSON("/UAC/rest/uac/getAllZones", function(allZone){
            	$.each(allZone, function(i, field){
            	$('#country').append(
        			$('<option></option>').val(i).html(field));
            });
        });

	//Getting all the BU Codes 
       $.getJSON("/UAC/rest/uac/getAllBUs", function(allBU){
            	$.each(allBU, function(i, field){
            	$('#category').append(
        			$('<option></option>').val(field).html(field)); 
            });
        });        
    
	});
	*/
	</script>
</head>
<body>
	<div id="header_canvas">
		<br/>
			<h2 align="center">Assign New Measure To Selective Users</h2>
		<br/>
	</div>		
	<div id="main_canvas">
	<br/>

		<div id="row3" class="row">
			<div id="r3c1" class="lbl_container">
				<span class="lbl1">Country : </span>
			</div>
			<div id="r3c2" class="txtbox_container">
				<select id="country" onchange="javascript:countryByZone(this.value)" style="width:150px;">
					<option value="-- Please select --">-- Please select --</option>
					<option value="US">US</option>
					<option value="Mexico">Mexico</option>
					<option value="Brazil">Brazil</option>
					<option value="Canada">Canada</option>								
					<option value="India">India</option>
				</select>
			</div>
		</div>

		<div id="row2" class="row">
			<div id="r2c1" class="lbl_container">
				<span class="lbl2">Category : </span>
			</div>
			<div id="r2c2">
				<select id="category" onchange="javascript:countryByBUCode(this.value)" style="width:150px;">
					<option value="-- Please select --">-- Please select --</option>
					<option value="category">Attitudes & Perceptions</option>
					<option value="category">Consumption Behavior</option>
					<option value="category">Market Share</option>
					<option value="category">P&L</option>	
					<option value="category">Retail Measures</option>	
					<option value="category">Shipment Volume</option>	
					<option value="category">Volume</option>
				</select>
			</div>
		</div>	

		<div id="row3" class="row">
			<div id="r3c1" class="lbl_container">
				<span class="lbl3">Measure : </span>
			</div>
			<div id="r3c2">
				<select id="measure" onchange="javascript:allocatedUser(this.value);availableUser(this.value);" style="width:150px;">
					<option value="-- Please select --">-- Please select --</option>
					<option value="Measure">Nielsen / IRI</option>
					<option value="Measure">Consideration</option>
					<option value="Measure">Share of Beer</option>
					<option value="Measure">Revenue Actual</option>
				</select>
			</div>
		</div>	

		<div id="row7" class="row" style="height:120px;">
			<div id="r7c1" class="lbl_container">
				<span class="lbl7">Available User : </span><br/>
				<select id="mySelect1" style="margin-left: 240px;width: 90px;height: 80px;" size="4" onclick="addUser()">
					<option>User1</option>
					<option>User4</option>
					<option>User6</option>
					<option>User7</option>
					<option>User8</option>
				</select>
			</div>
			<div id="r7c2" class="lbl_container">
				<span class="lbl8">Allocated User : </span><br/>
				<select id="mySelect2" style="width: 90px;height: 80px;" size="4" onclick="removeUser()">
				<option>User2</option>
				<option>User3</option>
				<option>User5</option>
				</select>
			</div>
		</div>	

		<br/>
		<div id="row9" class="row">
			<div id="r9c1" class="lbl_container">
			<div class="lbl9">
				<!--button type="button">Reset!</button-->
			</div>
			</div>
			<div id="r9c2" class="txtbox_container">
				<button type="button" onclick="javascript:show_elements1();">Update</button>
			</div>
		</div>			
	</div>
</body>
</html>